---
title: issue. ios 웹뷰 키보드영역 문제
date: 2018-12-09 11:59:45
tags: Etc
---

# Issue 

ios 에서는 input 에 focus 가 되면 키보드가 올라옵니다.   
키보드 영역이 올라오면서 사용자 편의를 위해 element 영역울 일정 높이만큼 같이 올려줍니다.         
키보드가 내려가면 올라간만큼 element 영역을 같이 내려주는 것이 기본 동작입니다.  

이 동작은 ios 웹뷰에서 아래와 같은 문제를 발생시킵니다. (사파리, 크롬의 경우는 발생하지 않습니다.)   
키보드가 올라가면서 element 영역이 올라가게 되는데 키보드가 내려간 후에도 올라간 element 영역이 내려오지 않습니다.      

![hexo](/img/etc/webview01.png)

왼쪽부터 1, 2, 3 번 화면으로 부르겠습니다. 
<br/> 
##### 1번 화면:   
1번 화면은 버튼까지가 전체 영역입니다. 영역이 넘치지 않기 때문에 스크롤이 생기지 않습니다. 화면 끝쪽에 버튼과 input이 배치되어 있습니다. 

##### 2번 화면:
input에 포커스가 되는 순간 ios 의 키보드가 올라오게 되는데 키보드가 input 을 가리지 않게 하기 위한 기본 동작에 의해서 element 영역이 끌어 올려지게 됩니다.     
그러면서 존재하지 않는 버튼 아래의 영역이 노출되게됩니다. 우리가 의도하지 않는 영역이 생기는 것 입니다.   
   
##### 3번 화면:   
키보드가 내려간 후에도 영역이 돌아오지 않게 됩니다. 이때 버튼의 영역을 제대로 잡지 못해 버튼이 우리가 기대한대로 동작하지 않을 수 도 있습니다.   
화면을 한번 스크롤을 해주면 원래 영역으로 돌아오게됩니다.  
 

![hexo](/img/etc/webview02.png)

문제는 이 화면에서 발생하게됩니다. 해당 모달영역을 fixed 입니다.    
ios 웹뷰에서 키보드와 관련된 fixed 문제가 많은데 그 중 하나가 fixed element 의 영역을 제대로 잡지 못하는 문제가 있습니다.  

위의 3 번 화면에서 스크롤을해서 제대로 영역을 돌려놓지 않고 알 수 없는 영역이 올라온 상태로 fixed 된 모달을 띄우게 된다면 모달안의 있는 element 들의 영역은 이미 우리가 의도한 것과는 다른 상황이 됩니다.  
즉 모달의 버튼을 눌렀을때 동작하지 않습니다.    

### Solution
웹뷰 자체의 동작을 제어할 수는 없습니다. 그래서 정확한 해결책이다 라고는 할 수 없으나 생각해봤을때 몇가지 방법이 있었습니다.

##### 미노출 영역이 올라오는 것이 아니라 존재하는 영역이 노출 될 수 있도록 한다.  
-> 위의 사진의 버튼 아래에 일부러 margin 이나 padding 으로 스크롤을 만드는 영역을 주는 것입니다. 그렇게 되면 없는 영역이 올라는 것이 아니기 때문에 영역을 잃지 않습니다.  

##### 사용자의 스크롤을 유도한다.
-> 위의 버그는 스크롤을 하면 영역을 제대로 잡는다는 해결방법이..? 있습니다. input 과 버튼이 한 화면에 들어오지 않도록 디자인을 변경하여 input 을 입력하고 스크롤을 내려 버튼을 클릭하게 한다던지 여러 방법으로 사용자의 스크롤을 유도하는 것으로 해결할 수 있습니다.
  
